2025-04-04 22:06:38,320 INFO: Attempting to upload avatar for influencer testinfluencer [in C:\Users\ELITEBOOK\OneDrive\Desktop\Projects\AvatarCommerce\app\main.py:336]
2025-04-04 22:06:38,942 ERROR: Storage upload failed: Header value must be str or bytes, not <class 'bool'> [in C:\Users\ELITEBOOK\OneDrive\Desktop\Projects\AvatarCommerce\app\main.py:351]
2025-04-04 22:11:09,094 INFO: Attempting to upload avatar for influencer testinfluencer [in C:\Users\ELITEBOOK\OneDrive\Desktop\Projects\AvatarCommerce\app\main.py:336]
2025-04-04 22:11:09,941 ERROR: Storage upload failed: {'statusCode': 403, 'error': Unauthorized, 'message': new row violates row-level security policy} [in C:\Users\ELITEBOOK\OneDrive\Desktop\Projects\AvatarCommerce\app\main.py:351]
Traceback (most recent call last):
  File "C:\Users\ELITEBOOK\OneDrive\Desktop\Projects\AvatarCommerce\venv\Lib\site-packages\storage3\_sync\file_api.py", line 53, in _request
    response.raise_for_status()
  File "C:\Users\ELITEBOOK\OneDrive\Desktop\Projects\AvatarCommerce\venv\Lib\site-packages\httpx\_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'https://iqeljrdbxweqyflitlrr.supabase.co/storage/v1/object/influencer-assets/avatars/original_testinfluencer_download.jpg'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ELITEBOOK\OneDrive\Desktop\Projects\AvatarCommerce\app\main.py", line 341, in create_avatar
    upload_response = supabase.storage.from_(bucket_name).upload(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ELITEBOOK\OneDrive\Desktop\Projects\AvatarCommerce\venv\Lib\site-packages\storage3\_sync\file_api.py", line 535, in upload
    return self._upload_or_update("POST", path, file, file_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ELITEBOOK\OneDrive\Desktop\Projects\AvatarCommerce\venv\Lib\site-packages\storage3\_sync\file_api.py", line 508, in _upload_or_update
    response = self._request(
               ^^^^^^^^^^^^^^
  File "C:\Users\ELITEBOOK\OneDrive\Desktop\Projects\AvatarCommerce\venv\Lib\site-packages\storage3\_sync\file_api.py", line 56, in _request
    raise StorageApiError(resp["message"], resp["error"], resp["statusCode"])
storage3.exceptions.StorageApiError: {'statusCode': 403, 'error': Unauthorized, 'message': new row violates row-level security policy}
2025-04-04 22:14:54,366 INFO: Attempting to upload avatar for influencer testinfluencer [in C:\Users\ELITEBOOK\OneDrive\Desktop\Projects\AvatarCommerce\app\main.py:336]
2025-04-04 22:14:54,921 ERROR: Storage upload failed: SyncBucketActionsMixin.upload() got an unexpected keyword argument 'headers' [in C:\Users\ELITEBOOK\OneDrive\Desktop\Projects\AvatarCommerce\app\main.py:354]
Traceback (most recent call last):
  File "C:\Users\ELITEBOOK\OneDrive\Desktop\Projects\AvatarCommerce\app\main.py", line 341, in create_avatar
    upload_response = supabase.storage.from_(bucket_name).upload(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: SyncBucketActionsMixin.upload() got an unexpected keyword argument 'headers'
2025-04-04 22:16:35,008 ERROR: Avatar creation failed: 'SyncStorageClient' object has no attribute 'auth' [in C:\Users\ELITEBOOK\OneDrive\Desktop\Projects\AvatarCommerce\app\main.py:360]
2025-04-04 22:19:31,042 ERROR: Avatar creation failed: Header value must be str or bytes, not <class 'bool'> [in C:\Users\ELITEBOOK\OneDrive\Desktop\Projects\AvatarCommerce\app\main.py:349]
2025-04-04 22:22:15,376 ERROR: Avatar creation failed: SyncBucketActionsMixin.upload() got an unexpected keyword argument 'upsert' [in C:\Users\ELITEBOOK\OneDrive\Desktop\Projects\AvatarCommerce\app\main.py:351]
2025-04-04 22:23:52,505 ERROR: Avatar creation failed: {'statusCode': 403, 'error': Unauthorized, 'message': new row violates row-level security policy} [in C:\Users\ELITEBOOK\OneDrive\Desktop\Projects\AvatarCommerce\app\main.py:361]
2025-04-04 22:25:54,538 ERROR: Upload error: {'statusCode': 403, 'error': Unauthorized, 'message': new row violates row-level security policy} [in C:\Users\ELITEBOOK\OneDrive\Desktop\Projects\AvatarCommerce\app\main.py:367]
2025-04-04 22:35:24,845 ERROR: Upload error: {'statusCode': 413, 'error': Payload too large, 'message': The object exceeded the maximum allowed size} [in C:\Users\ELITEBOOK\OneDrive\Desktop\Projects\AvatarCommerce\app\main.py:361]
2025-04-04 22:36:19,609 ERROR: Upload error: {'statusCode': 413, 'error': Payload too large, 'message': The object exceeded the maximum allowed size} [in C:\Users\ELITEBOOK\OneDrive\Desktop\Projects\AvatarCommerce\app\main.py:361]
